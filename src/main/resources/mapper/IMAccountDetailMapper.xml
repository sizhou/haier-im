<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.haier.im.dao.IMAccountDetailMapper">
    <!--<resultMap id="BaseResultMap" type="com.haier.im.po.IMAccountDetail">-->
    <!--<id column="id" property="id" jdbcType="BIGINT"/>-->
    <!--<result column="user_id" property="userId" jdbcType="BIGINT"/>-->
    <!--<result column="sex" property="sex" jdbcType="INTEGER"/>-->
    <!--<result column="birthday" property="birthday" jdbcType="Date"/>-->
    <!--<result column="is_delete" property="isDelete" jdbcType="TINYINT"/>-->
    <!--</resultMap>-->
    <!--<sql id="Base_Column_List">-->
    <!--id,-->
    <!--user_id,-->
    <!--sex,-->
    <!--birthday,-->
    <!--is_delete,-->
    <!--creator,-->
    <!--create_time,-->
    <!--update_time-->
    <!--</sql>-->


    <!--<sql id="SELECT_COLUMN">-->
    <!--id AS id,-->
    <!--user_id AS userId,-->
    <!--sex AS sex,-->
    <!--birthday AS birthday-->
    <!--</sql>-->


    <insert id="insertAccountDetail" parameterType="com.haier.im.po.IMAccountDetail">
        INSERT INTO `im_account_detail`
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="addEn.userId != null and addEn.userId > 0">
                `user_id`,
            </if>
            <if test="addEn.sex != null">
                `sex`,
            </if>
            <if test="addEn.birthday != null">
                `birthday`,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="addEn.userId != null and addEn.userId > 0">
                #{addEn.userId},
            </if>
            <if test="addEn.sex != null">
                #{addEn.sex},
            </if>
            <if test="addEn.birthday != null">
                #{addEn.birthday},
            </if>
        </trim>


    </insert>
    <update id="updDelAccountDetailByUserId">
        UPDATE im_account_detail
        SET is_delete = 1
        WHERE
            user_id = #{userId}
    </update>
    <update id="updAccountDetailByUserId">
        UPDATE im_account_detail
        <set>
            <if test="updEn.sex != null">
                sex = #{updEn.sex},
            </if>
            <if test="updEn.birthday != null">
                birthday = #{updEn.birthday},
            </if>
        </set>
        WHERE user_id = #{userId}

    </update>
    <select id="findAccountDetailByUserId" resultType="com.haier.im.po.IMAccountDetail">
        SELECT
            user_id AS userId,
            sex AS sex,
            birthday AS birthday
        FROM
            im_account_detail
        WHERE
            user_id = #{userId}
    </select>
</mapper>



